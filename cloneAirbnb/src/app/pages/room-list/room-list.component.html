<app-navigation></app-navigation>

<div class="filter">
  <!-- filter -->
  <div class="filterLeft">
    <div class="date">
      <input
        type="text"
        class="filterButton"
        [bsConfig]="{ rangeInputFormat: 'MM/DD', isAnimated: true }"
        bsDaterangepicker
        [ngStyle]="dateStyle"
        (bsValueChange)="onValueChange($event)"
        (bsValueChange)="changeStyle()"
        [dateCustomClasses]="dateCustomClasses"
        placeholder="{{ 'roomList.datePlaceholder' | translate }}"
      />
      <!-- date filterbutton -->
    </div>
    <!-- date filterbutton -->

    <div
      class="personnel"
      dropdown
      #personnelDropdown="bs-dropdown"
      [insideClick]="true"
    >
      <!-- personnel filterbutton -->
      <button class="filterButton" dropdownToggle type="button">
        <span *ngIf="personnel === 1"
          >{{ personnel }} {{ 'roomList.guest' | translate }}</span
        >
        <span *ngIf="personnel > 1"
          >{{ personnel }} {{ 'roomList.guests' | translate }}</span
        >
      </button>
      <ul
        *dropdownMenu
        class="personnel-dropdown-menu dropdown-menu"
        role="menu"
      >
        <div class="counterLine">
          <div class="people">
            <p class="top">{{ 'roomList.adults' | translate }}</p>
          </div>
          <div class="counterCheck">
            <button type="button" class="decrease" (click)="decrease(adult)">
              -
            </button>
            <span class="counter" id="adults" #adult>{{ adults }}</span>
            <button type="button" class="increase" (click)="increase(adult)">
              +
            </button>
          </div>
        </div>

        <div role="menuitem">
          <div class="counterLine">
            <div class="people">
              <p>{{ 'roomList.children' | translate }}</p>
              <span>{{ 'roomList.childrenSpan' | translate }}</span>
            </div>
            <div class="counterCheck">
              <button type="button" class="decrease" (click)="decrease(child)">
                -
              </button>
              <span class="counter" id="children" #child>{{ children }}</span>
              <button type="button" class="increase" (click)="increase(child)">
                +
              </button>
            </div>
          </div>
        </div>
        <div role="menuitem">
          <div class="counterLine">
            <div class="people">
              <p>{{ 'roomList.infants' | translate }}</p>
              <span>{{ 'roomList.infantsSpan' | translate }}</span>
            </div>
            <div class="counterCheck">
              <button type="button" class="decrease" (click)="decrease(infant)">
                -
              </button>
              <span class="counter" id="infants" #infant>{{ infants }}</span>
              <button type="button" class="increase" (click)="increase(infant)">
                +
              </button>
            </div>
          </div>
        </div>
        <button
          class="personnelSaveBtn"
          type="button"
          (click)="personnelDropdown.isOpen = !personnelDropdown.isOpen"
          (click)="changePersonnel()"
        >
          {{ 'roomList.saveBtn' | translate }}
        </button>
      </ul>
    </div>
    <!-- personnel filterbutton -->

    <div
      class="businesstrip"
      dropdown
      #businesstripDropdown="bs-dropdown"
      [insideClick]="true"
    >
      <!-- businesstrip filterbutton -->
      <button class="businesstrip filterButton" dropdownToggle type="button">
        {{ 'roomList.workTrip' | translate }}
      </button>
      <ul
        *dropdownMenu
        class="businesstrip-dropdown-menu dropdown-menu"
        role="menu"
      >
        <input class="businesstrip-checkbox" type="checkbox" #binput />
        <p>
          <strong>{{ 'roomList.workTripTitle' | translate }}</strong>
        </p>
        <p class="personnel-content-second">
          {{ 'roomList.workTripContents' | translate }}
        </p>
        <!-- <button
          *ngIf="binput.checked"
          (click)="binput.checked = false"
          class="personnelremoveBtn"
          type="button"
        >
          삭제
        </button> -->
        <button
          class="personnelSaveBtn"
          type="button"
          (click)="businesstripDropdown.isOpen = !businesstripDropdown.isOpen"
        >
          {{ 'roomList.saveBtn' | translate }}
        </button>
      </ul>
    </div>
    <!-- businesstrip filterbutton -->

    <div
      class="roomtype"
      dropdown
      #roomtypeDropdown="bs-dropdown"
      [insideClick]="true"
    >
      <!-- roomtype filterbutton -->
      <button class="roomtype filterButton" dropdownToggle type="button">
        {{ 'roomList.typeOfPlace' | translate }}
      </button>
      <ul
        *dropdownMenu
        class="roomtype-dropdown-menu dropdown-menu"
        role="menu"
      >
        <li>
          <input class="roomtype-checkbox" type="checkbox" />
          <div class="roomtype-text">
            <p>
              <strong>{{ 'roomList.entirePlace' | translate }}</strong>
            </p>
            <p>{{ 'roomList.entirePlaceContents' | translate }}</p>
          </div>
        </li>
        <li>
          <input class="roomtype-checkbox" type="checkbox" />
          <div class="roomtype-text">
            <p>
              <strong>{{ 'roomList.privateRoom' | translate }}</strong>
            </p>
            <p>
              {{ 'roomList.privateRoomContents' | translate }}
            </p>
          </div>
        </li>
        <li>
          <input class="roomtype-checkbox" type="checkbox" />
          <div class="roomtype-text">
            <p>
              <strong>{{ 'roomList.hotelRoom' | translate }}</strong>
            </p>
            <p>{{ 'roomList.hotelRoomContents' | translate }}</p>
          </div>
        </li>
        <li>
          <input class="roomtype-checkbox" type="checkbox" />
          <div class="roomtype-text">
            <p>
              <strong>{{ 'roomList.sharedRoom' | translate }}</strong>
            </p>
            <p>
              {{ 'roomList.sharedRoomContents' | translate }}
            </p>
          </div>
        </li>
        <button
          class="personnelSaveBtn"
          type="button"
          (click)="roomtypeDropdown.isOpen = !roomtypeDropdown.isOpen"
        >
          {{ 'roomList.saveBtn' | translate }}
        </button>
      </ul>
      <!-- roomtype filterbutton -->
    </div>

    <div
      class="price"
      dropdown
      #priceDropdown="bs-dropdown"
      [insideClick]="true"
    >
      <!-- price filterbutton -->
      <button class="price filterButton" dropdownToggle type="button">
        {{ 'roomList.price' | translate }}
      </button>
      <ul *dropdownMenu class="price-dropdown-menu dropdown-menu" role="menu">
        <ng5-slider
          [(value)]="minValue"
          [(highValue)]="maxValue"
          [options]="options"
        ></ng5-slider>
        <button
          class="personnelSaveBtn"
          type="button"
          (click)="priceDropdown.isOpen = !priceDropdown.isOpen"
          (click)="setPrice()"
        >
          {{ 'roomList.saveBtn' | translate }}
        </button>
      </ul>
    </div>
    <!-- price filterbutton -->
  </div>
</div>
<!-- //filter -->

<div class="roomListWrap clear-fix">
  <div class="list">
    <div class="notice">
      <p>
        {{ 'roomList.additionalInfoForPice' | translate }}
      </p>
    </div>
    <ul>
      <p class="roomCount" *ngIf="roomCount === 1">
        {{ roomCount }} {{ 'roomList.placeToStay' | translate }}
      </p>
      <p class="roomCount" *ngIf="roomCount > 1">
        {{ roomCount }} {{ 'roomList.placesToStay' | translate }}
      </p>
      <li
        class="detailList"
        *ngFor="let room of roomList"
        (click)="sendResvationId(room.id)"
      >
        <div class="detailImg">
          <img class="img1" src="{{ room.image }}" />
        </div>
        <div class="detailText">
          <p>{{ room.room_type }} {{ room.space }}</p>
          <p>{{ room.title }}</p>
          <p>
            {{ room.capacity }}
            <span *ngIf="room.capacity === 1">{{
              'roomList.guest' | translate
            }}</span
            ><span *ngIf="room.capacity > 1">{{
              'roomList.guests' | translate
            }}</span>
            · {{ room.bed_type }} · {{ room.bedroom }}
            <span *ngIf="room.bedroom === 1">{{
              'roomList.bedroom' | translate
            }}</span
            ><span *ngIf="room.bedroom > 1">{{
              'roomList.bedrooms' | translate
            }}</span>
            · {{ room.bathroom }}
            <span *ngIf="room.bathroom === 1">{{
              'roomList.bathroom' | translate
            }}</span
            ><span *ngIf="room.bathroom > 1">{{
              'roomList.bathrooms' | translate
            }}</span>
            <span>{{ room.facilities }}</span>
            <span>{{ room.total_rating }}</span>
          </p>
        </div>
      </li>
    </ul>
  </div>

  <div class="map">
    <div class="mapWrap">
      <agm-map
        [(latitude)]="latitude"
        [(longitude)]="longitude"
        [zoom]="12"
        [zoomControl]="true"
        [zoomControlOptions]="zoomControlOptions"
        [scrollwheel]="false"
        (mapClick)="mapClick()"
        (mapReady)="mapReady($event)"
      >
        <agm-marker
          *ngFor="let marker of markers"
          [latitude]="marker.lat"
          [longitude]="marker.lng"
          [opacity]="marker.alpha"
          [iconUrl]="icon"
          (markerClick)="markerClick(iw)"
        >
          <agm-info-window [isOpen]="marker.disabled" #iw>
            <div class="infowindow">
              <div>
                <img class="infoimg" src="{{ marker.image }}" />
              </div>
              <div>
                <p>{{ marker.room_type }} {{ marker.beds }}</p>
                <p>{{ marker.title }}</p>
                <p>{{ marker.total_rating }}</p>
              </div>
            </div>
            `
          </agm-info-window>
        </agm-marker>
      </agm-map>
    </div>
  </div>
</div>
